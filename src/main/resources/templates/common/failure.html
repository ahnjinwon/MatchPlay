<!DOCTYPE HTML>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{common/layout}"
        xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
>
<head>
    <title>Hello</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<div layout:fragment="content">
    <p>main</p>
    <p>login fail</p>

    <script>
        // 페이지 로드 시 URL 파라미터에서 error=true를 확인
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get("error") === "true") {
            alert("로그인 실패! 다시 시도해주세요.");

            // URL에서 error 파라미터 제거
            urlParams.delete('error');
            const newUrl = window.location.pathname + (urlParams.toString() ? '?' + urlParams.toString() : '');
            window.history.replaceState({}, '', newUrl);  // URL에서 error 파라미터 제거
        }
    </script>
</div>
</body>
</html>